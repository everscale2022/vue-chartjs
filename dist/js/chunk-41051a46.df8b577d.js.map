{"version":3,"sources":["webpack:///./src/api/allTransactionsVolumes.js","webpack:///./src/components/allTransactionsVolumes/Common.vue?42a0","webpack:///./src/components/allTransactionsVolumes/Common.vue?8962","webpack:///./src/components/allTransactionsVolumes/Chart.vue","webpack:///src/components/surfTransactionsVolumes/Chart.vue","webpack:///./src/components/allTransactionsVolumes/Chart.vue?6813","webpack:///src/components/allTransactionsVolumes/Common.vue","webpack:///./src/components/allTransactionsVolumes/Common.vue?1b26","webpack:///./src/components/allTransactionsVolumes/Common.vue","webpack:///./node_modules/comma-number/index.js"],"names":["require","client","utils","commaNumber","makeQuery","query","index","lt","now","oneDay","gt","allTransactionsVolumes","volumes","labels","net","response","result","data","Object","entries","key","value","push","oneTon","timestamp","split","dt","Date","toLocaleDateString","datasets","label","backgroundColor","console","log","lastBiggestTransactions","transactions","map","v","id","account_addr","now_string","Math","round","balance_delta","module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","chartData","directives","name","rawName","expression","_v","items","staticRenderFns","extends","mixins","reactiveProp","options","responsive","maintainAspectRatio","legend","component","loading_graphic","loading_table","components","chart","inputNumber","optionalSeparator","optionalDecimalChar","decimalChar","stringNumber","number","length","Number","replace","String","isInteger","isNaN","isFinite","decimalIndex","lastIndexOf","decimal","slice","parts","parse","join","string","separator","i","strings","substr","bindWith"],"mappings":"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","file":"js/chunk-41051a46.df8b577d.js","sourcesContent":["const { client } = require(\"./client/webClient\");\nconst utils = require(\"./utils\");\nconst commaNumber = require('comma-number');\n\nfunction makeQuery() {\n    let query = '{';\n    for (let index = 14; index >= 0; index--) {\n        let lt = utils.now - index * utils.oneDay;\n        let gt = lt - utils.oneDay;\n        query += `\n            data_${lt}: aggregateTransactions(\n                filter: {      \n                now: { gt: ${gt} lt: ${lt}}\n                balance_delta:{                    \n                    gt: \"0\"                    \n                }  \n                account:{\n                    code_hash:{\n                      ne:\"207dc560c5956de1a2c1479356f8f3ee70a59767db2bf4788b1d61ad42cdad82\"\n                    } \n                }             \n                }\n                fields: [{ field: \"balance_delta\", fn: SUM }]\n            )\n          `;\n    }\n    query += '}';  \n    return query;\n}\n\nconst allTransactionsVolumes = async () => {\n    let volumes = [];\n    let labels = [];\n\n    try {\n        let response =  (await client.net.query({ \"query\": makeQuery() })).result.data;\n        for (const [key, value] of Object.entries(response)) {\n            volumes.push(value[0] / utils.oneTon);\n            let timestamp = key.split(\"_\")[1];\n            let dt = new Date(timestamp * 1000).toLocaleDateString(\"ru-RU\");\n            labels.push(dt);\n        }     \n        return {\n            datasets: [\n                {\n                    label: \"All transactions volumes\",\n                    backgroundColor: \"lightblue\",\n                    data: volumes,\n                },\n            ],\n            labels\n        };\n    } catch (e) {\n        console.log(e);\n    }\n}\n\nconst lastBiggestTransactions = async () => {\n    let lt = utils.now;\n    let gt = lt - utils.oneDay*3;\n    let query = `\n    query {\n        transactions(\n          filter: {\n            now: { gt: ${gt}, lt: ${lt} }\n            balance_delta: { gt: \"1000000000000\" }           \n          }\n          orderBy: { path: \"now\", direction: DESC }\n        ) {\n          id\n          balance_delta(format: DEC)\n          now_string\n          account_addr\n        }\n      }   \n      `;\n    try {\n        let response = (await client.net.query({ \"query\": query })).result.data.transactions;   \n        return response.map((v) => {\n          return {\n              'Transactions ID': v.id,\n              'Account address': v.account_addr,\n              'Time': v.now_string,\n              'Tokens': `${commaNumber(Math.round(v.balance_delta / 1_000_000_000))} TONs`\n          }\n      });      \n    } catch (e) {\n        console.log(e);\n    }\n\n}\n\nmodule.exports = {\n    allTransactionsVolumes,\n    lastBiggestTransactions\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Common.vue?vue&type=style&index=0&id=770f915a&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-center\",attrs:{\"id\":\"buttons\"}},[_c('div',[_c('chart',{attrs:{\"chart-data\":_vm.chartData}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading_graphic),expression:\"loading_graphic\"}],staticClass:\"h3 text-info\"},[_vm._v(\"Data loading ...\")])],1),_c('div',{staticClass:\"h5 mt-4\"},[_vm._v(\"Last big(>1000 tons) NOT Surf transactions\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading_table),expression:\"loading_table\"}],staticClass:\"h5 text-info\"},[_vm._v(\"Data loading ...\")]),_c('b-table',{attrs:{\"striped\":\"\",\"hover\":\"\",\"items\":_vm.items}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render, staticRenderFns\nimport script from \"./Chart.vue?vue&type=script&lang=js&\"\nexport * from \"./Chart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { Line, mixins } from \"vue-chartjs\";\nconst { reactiveProp } = mixins;\n\nexport default {\n  extends: Line,\n  mixins: [reactiveProp],\n  data() {\n    return {\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        legend: {           \n          labels: {                          \n              fontSize: 25,            \n          },\n        },\n      },\n    };\n  },\n  async mounted() {\n    this.renderChart(this.chartData, this.options);\n  },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chart.vue?vue&type=script&lang=js&\"","<template>\n  <div id=\"buttons\" class=\"text-center\">\n    <div>\n      <chart :chart-data=\"chartData\" />\n      <div class=\"h3 text-info\" v-show=\"loading_graphic\">Data loading ...</div>\n    </div>   \n     <div class=\"h5 mt-4\">Last big(>1000 tons) NOT Surf transactions</div>\n       <div class=\"h5 text-info\" v-show=\"loading_table\">Data loading ...</div>\n      <b-table striped hover :items=\"items\"></b-table>\n  </div>\n</template>\n<script>\nimport chart from \"./Chart.vue\";\nimport {allTransactionsVolumes,lastBiggestTransactions} from \"../../api/allTransactionsVolumes\";\n\nexport default {\n  data() {\n    return {\n      chartData: null,\n      loading_graphic: true,\n      loading_table: true\n    };\n  },\n  components: {\n    chart,\n  },\n   mounted() {\n    allTransactionsVolumes().then((r)=>{\n     this.chartData = r;\n     this.loading_graphic= false;\n    });     \n    lastBiggestTransactions().then((r)=>{\n      this.items = r;    \n      this.loading_table = false;        \n    })        \n  },\n};\n</script>\n<style scoped>\n#buttons span {\n  margin-right: 1rem;\n  margin-left: 1rem;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Common.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Common.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Common.vue?vue&type=template&id=770f915a&scoped=true&\"\nimport script from \"./Common.vue?vue&type=script&lang=js&\"\nexport * from \"./Common.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Common.vue?vue&type=style&index=0&id=770f915a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"770f915a\",\n  null\n  \n)\n\nexport default component.exports","'use strict'\n\n// return a string with the provided number formatted with commas.\n// can specify either a Number or a String.\nfunction commaNumber(inputNumber, optionalSeparator, optionalDecimalChar) {\n\n  // default `decimalChar` is a period\n  const decimalChar = optionalDecimalChar || '.'\n\n  let stringNumber // we assign this in the switch block and need it later.\n\n  {\n    let number // we assign this in the switch block and need it right after.\n\n    switch (typeof inputNumber) {\n\n      case 'string':\n\n        // if there aren't enough digits to need separators then return it\n        // NOTE: some numbers which are too small will get passed this\n        //       when they have decimal values which make them too long here.\n        //       but, the number value check after this switch will catch it.\n        if (inputNumber.length < (inputNumber[0] === '-' ? 5 : 4)) {\n          return inputNumber\n        }\n\n        // remember it as a string in `stringNumber` and convert to a Number\n        stringNumber = inputNumber\n\n        // if they're not using the Node standard decimal char then replace it\n        // before converting.\n        number = Number(\n          (decimalChar !== '.') ? stringNumber.replace(decimalChar, '.') : stringNumber\n        )\n        break\n\n      // convert to a string.\n      // NOTE: don't check if the number is too small before converting\n      //       because we'll need to return `stringNumber` anyway.\n      case 'number':\n        stringNumber = String(inputNumber)\n        number       = inputNumber\n        // create the string version with the decimalChar they specified.\n        // this matches what the above case 'string' produces,\n        // and, fixes the bug *not* doing this caused.\n        if ('.' !== decimalChar && !Number.isInteger(inputNumber)) {\n          stringNumber = stringNumber.replace('.', decimalChar)\n        }\n        break\n\n      // return invalid type as-is\n      default: return inputNumber\n    }\n\n    // when it doesn't need a separator or isn't a number then return it\n    if ((-1000 < number && number < 1000) || isNaN(number) || !isFinite(number)) {\n      return stringNumber\n    }\n  }\n\n  {\n    // strip off decimal value to add back in later\n    const decimalIndex = stringNumber.lastIndexOf(decimalChar)\n    let decimal\n    if (decimalIndex > -1) {\n      decimal = stringNumber.slice(decimalIndex)\n      stringNumber = stringNumber.slice(0, decimalIndex)\n    }\n\n    // finally, parse the string. Note, default 'separator' is a comma.\n    const parts = parse(stringNumber, optionalSeparator || ',')\n\n    // if there's a decimal value then add it to the parts.\n    if (decimal) {// NOTE: we sliced() it off including the decimalChar\n      parts.push(decimal)\n    }\n\n    // combine all parts for the final string (note, has separators).\n    return parts.join('')\n  }\n}\n\nfunction parse(string, separator) {\n\n  // find first index to split the string at (where 1st separator goes).\n  let i = ((string.length - 1) % 3) + 1\n\n  // above calculation is wrong when num is negative and a certain size.\n  if (i === 1 && (string[0] === '-')) {\n    i = 4  // example: -123,456,789  start at 4, not 1.\n  }\n\n  const strings = [ // holds the string parts\n    string.slice(0, i) // grab part before the first separator\n  ]\n\n  // split remaining string in groups of 3 where a separator belongs\n  for (; i < string.length; i += 3) {\n    strings.push(separator, string.substr(i, 3))\n  }\n\n  return strings\n}\n\n\n// convenience function for currying style:\n//   const format = commaNumber.bindWith(',', '.')\nfunction bindWith(separator, decimalChar) {\n  return function(number) {\n    return commaNumber(number, separator, decimalChar)\n  }\n}\n\nmodule.exports = commaNumber\nmodule.exports.bindWith = bindWith\n"],"sourceRoot":""}