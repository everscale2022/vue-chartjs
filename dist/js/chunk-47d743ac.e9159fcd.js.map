{"version":3,"sources":["webpack:///./src/components/surfTransactionsVolumes/Common.vue?3763","webpack:///./src/components/surfTransactionsVolumes/Common.vue?6c38","webpack:///./src/components/surfTransactionsVolumes/Chart.vue","webpack:///src/components/surfTransactionsVolumes/Chart.vue","webpack:///./src/components/surfTransactionsVolumes/Chart.vue?0719","webpack:///src/components/surfTransactionsVolumes/Common.vue","webpack:///./src/components/surfTransactionsVolumes/Common.vue?54bc","webpack:///./src/components/surfTransactionsVolumes/Common.vue","webpack:///./node_modules/comma-number/index.js","webpack:///./src/api/surfTransactionsVolumes.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","chartData","directives","name","rawName","value","expression","_v","items","staticRenderFns","extends","mixins","reactiveProp","data","options","responsive","maintainAspectRatio","legend","labels","component","loading_graphic","loading_table","components","chart","commaNumber","inputNumber","optionalSeparator","optionalDecimalChar","decimalChar","stringNumber","number","length","Number","replace","String","isInteger","isNaN","isFinite","decimalIndex","lastIndexOf","decimal","slice","parts","parse","push","join","string","separator","i","strings","substr","bindWith","module","exports","require","client","utils","makeQuery","query","index","lt","now","oneDay","gt","surfCodeHash","surfTransactionsVolumes","volumes","net","response","result","Object","entries","key","oneTon","timestamp","split","dt","Date","toLocaleDateString","datasets","label","backgroundColor","console","log","lastBiggestSurfTransactions","transactions","map","v","id","account_addr","now_string","Math","round","balance_delta"],"mappings":"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","file":"js/chunk-47d743ac.e9159fcd.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Common.vue?vue&type=style&index=0&id=a8e4cad8&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-center\",attrs:{\"id\":\"buttons\"}},[_c('div',[_c('chart',{attrs:{\"chart-data\":_vm.chartData}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading_graphic),expression:\"loading_graphic\"}],staticClass:\"h3 text-info\"},[_vm._v(\"Data loading ...\")])],1),_c('div',{staticClass:\"h5 mt-4\"},[_vm._v(\"Last big(>1000 tons) Surf transactions\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading_table),expression:\"loading_table\"}],staticClass:\"h5 text-info\"},[_vm._v(\"Data loading ...\")]),_c('b-table',{attrs:{\"striped\":\"\",\"hover\":\"\",\"items\":_vm.items}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render, staticRenderFns\nimport script from \"./Chart.vue?vue&type=script&lang=js&\"\nexport * from \"./Chart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { Line, mixins } from \"vue-chartjs\";\nconst { reactiveProp } = mixins;\n\nexport default {\n  extends: Line,\n  mixins: [reactiveProp],\n  data() {\n    return {\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        legend: {           \n          labels: {                          \n              fontSize: 25,            \n          },\n        },\n      },\n    };\n  },\n  async mounted() {\n    this.renderChart(this.chartData, this.options);\n  },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chart.vue?vue&type=script&lang=js&\"","<template>\n  <div id=\"buttons\" class=\"text-center\">\n    <div>\n      <chart :chart-data=\"chartData\" />\n      <div class=\"h3 text-info\" v-show=\"loading_graphic\">Data loading ...</div>\n    </div>   \n     <div class=\"h5 mt-4\">Last big(>1000 tons) Surf transactions</div>\n       <div class=\"h5 text-info\" v-show=\"loading_table\">Data loading ...</div>\n      <b-table striped hover :items=\"items\"></b-table>\n  </div>\n</template>\n<script>\nimport chart from \"./Chart.vue\";\nimport {surfTransactionsVolumes,lastBiggestSurfTransactions} from \"../../api/surfTransactionsVolumes\";\n\nexport default {\n  data() {\n    return {\n      chartData: null,\n      loading_graphic: true,\n      loading_table: true\n    };\n  },\n  components: {\n    chart,\n  },\n   mounted() {\n    surfTransactionsVolumes().then((r)=>{\n     this.chartData = r;\n     this.loading_graphic= false;\n    });     \n    lastBiggestSurfTransactions().then((r)=>{\n      this.items = r;    \n      this.loading_table = false;        \n    })        \n  },\n};\n</script>\n<style scoped>\n#buttons span {\n  margin-right: 1rem;\n  margin-left: 1rem;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Common.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Common.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Common.vue?vue&type=template&id=a8e4cad8&scoped=true&\"\nimport script from \"./Common.vue?vue&type=script&lang=js&\"\nexport * from \"./Common.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Common.vue?vue&type=style&index=0&id=a8e4cad8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a8e4cad8\",\n  null\n  \n)\n\nexport default component.exports","'use strict'\n\n// return a string with the provided number formatted with commas.\n// can specify either a Number or a String.\nfunction commaNumber(inputNumber, optionalSeparator, optionalDecimalChar) {\n\n  // default `decimalChar` is a period\n  const decimalChar = optionalDecimalChar || '.'\n\n  let stringNumber // we assign this in the switch block and need it later.\n\n  {\n    let number // we assign this in the switch block and need it right after.\n\n    switch (typeof inputNumber) {\n\n      case 'string':\n\n        // if there aren't enough digits to need separators then return it\n        // NOTE: some numbers which are too small will get passed this\n        //       when they have decimal values which make them too long here.\n        //       but, the number value check after this switch will catch it.\n        if (inputNumber.length < (inputNumber[0] === '-' ? 5 : 4)) {\n          return inputNumber\n        }\n\n        // remember it as a string in `stringNumber` and convert to a Number\n        stringNumber = inputNumber\n\n        // if they're not using the Node standard decimal char then replace it\n        // before converting.\n        number = Number(\n          (decimalChar !== '.') ? stringNumber.replace(decimalChar, '.') : stringNumber\n        )\n        break\n\n      // convert to a string.\n      // NOTE: don't check if the number is too small before converting\n      //       because we'll need to return `stringNumber` anyway.\n      case 'number':\n        stringNumber = String(inputNumber)\n        number       = inputNumber\n        // create the string version with the decimalChar they specified.\n        // this matches what the above case 'string' produces,\n        // and, fixes the bug *not* doing this caused.\n        if ('.' !== decimalChar && !Number.isInteger(inputNumber)) {\n          stringNumber = stringNumber.replace('.', decimalChar)\n        }\n        break\n\n      // return invalid type as-is\n      default: return inputNumber\n    }\n\n    // when it doesn't need a separator or isn't a number then return it\n    if ((-1000 < number && number < 1000) || isNaN(number) || !isFinite(number)) {\n      return stringNumber\n    }\n  }\n\n  {\n    // strip off decimal value to add back in later\n    const decimalIndex = stringNumber.lastIndexOf(decimalChar)\n    let decimal\n    if (decimalIndex > -1) {\n      decimal = stringNumber.slice(decimalIndex)\n      stringNumber = stringNumber.slice(0, decimalIndex)\n    }\n\n    // finally, parse the string. Note, default 'separator' is a comma.\n    const parts = parse(stringNumber, optionalSeparator || ',')\n\n    // if there's a decimal value then add it to the parts.\n    if (decimal) {// NOTE: we sliced() it off including the decimalChar\n      parts.push(decimal)\n    }\n\n    // combine all parts for the final string (note, has separators).\n    return parts.join('')\n  }\n}\n\nfunction parse(string, separator) {\n\n  // find first index to split the string at (where 1st separator goes).\n  let i = ((string.length - 1) % 3) + 1\n\n  // above calculation is wrong when num is negative and a certain size.\n  if (i === 1 && (string[0] === '-')) {\n    i = 4  // example: -123,456,789  start at 4, not 1.\n  }\n\n  const strings = [ // holds the string parts\n    string.slice(0, i) // grab part before the first separator\n  ]\n\n  // split remaining string in groups of 3 where a separator belongs\n  for (; i < string.length; i += 3) {\n    strings.push(separator, string.substr(i, 3))\n  }\n\n  return strings\n}\n\n\n// convenience function for currying style:\n//   const format = commaNumber.bindWith(',', '.')\nfunction bindWith(separator, decimalChar) {\n  return function(number) {\n    return commaNumber(number, separator, decimalChar)\n  }\n}\n\nmodule.exports = commaNumber\nmodule.exports.bindWith = bindWith\n","const { client } = require(\"./client/webClient\");\nconst utils = require(\"./utils\");\nconst commaNumber = require('comma-number');\n\nfunction makeQuery() {\n    let query = '{';\n    for (let index = 14; index >= 0; index--) {\n        let lt = utils.now - index * utils.oneDay;\n        let gt = lt - utils.oneDay;\n        query += `\n            data_${lt}: aggregateTransactions(\n                filter: {      \n                now: { gt: ${gt} lt: ${lt}}\n                balance_delta:{                    \n                    gt: \"0\"                    \n                }\n                account:{\n                code_hash:{\n                    eq: \"${utils.surfCodeHash}\"\n                }\n                }\n                }\n                fields: [{ field: \"balance_delta\", fn: SUM }]\n            )\n          `;\n    }\n    query += '}';  \n    return query;\n}\n\nconst surfTransactionsVolumes = async () => {\n    let volumes = [];\n    let labels = [];\n\n    try {\n        let response =  (await client.net.query({ \"query\": makeQuery() })).result.data;\n        for (const [key, value] of Object.entries(response)) {\n            volumes.push(value[0] / utils.oneTon);\n            let timestamp = key.split(\"_\")[1];\n            let dt = new Date(timestamp * 1000).toLocaleDateString(\"ru-RU\");\n            labels.push(dt);\n        }     \n        return {\n            datasets: [\n                {\n                    label: \"Surf transactions volumes\",\n                    backgroundColor: \"lightblue\",\n                    data: volumes,\n                },\n            ],\n            labels\n        };\n    } catch (e) {\n        console.log(e);\n    }\n}\n\nconst lastBiggestSurfTransactions = async () => {\n    let lt = utils.now;\n    let gt = lt - utils.oneDay*3;\n    let query = `\n    query {\n        transactions(\n          filter: {\n            now: { gt: ${gt}, lt: ${lt} }\n            balance_delta: { gt: \"1000000000000\" }\n            account: {\n              code_hash: {\n                eq: \"207dc560c5956de1a2c1479356f8f3ee70a59767db2bf4788b1d61ad42cdad82\"\n              }\n            }\n          }\n          orderBy: { path: \"now\", direction: DESC }\n        ) {\n          id\n          balance_delta(format: DEC)\n          now_string\n          account_addr\n        }\n      }   \n      `;\n    try {\n        let response = (await client.net.query({ \"query\": query })).result.data.transactions;\n        return response.map((v) => {\n            return {\n                'Transactions ID': v.id,\n                'Account address': v.account_addr,\n                'Time': v.now_string,\n                'Tokens': `${commaNumber(Math.round(v.balance_delta / 1_000_000_000))} TONs`\n            }\n        });\n    } catch (e) {\n        console.log(e);\n    }\n\n}\n\nmodule.exports = {\n    surfTransactionsVolumes,\n    lastBiggestSurfTransactions\n}"],"sourceRoot":""}