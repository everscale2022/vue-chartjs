{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./src/components/StakesGiversUsers.vue","webpack:///src/components/StakesGiversUsers.vue","webpack:///./src/components/StakesGiversUsers.vue?5c3d","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/comma-number/index.js","webpack:///./src/api/stakesGiversUsers.js"],"names":["_nonIterableSpread","TypeError","module","exports","__esModule","render","staticRenderFns","extends","data","options","responsive","maintainAspectRatio","title","display","text","fontSize","fontStyle","mounted","stakesGiversUsers","labels","datasets","label","backgroundColor","component","_iterableToArray","iter","Symbol","iterator","Array","from","arrayLikeToArray","require","_arrayWithoutHoles","arr","isArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","_toConsumableArray","commaNumber","inputNumber","optionalSeparator","optionalDecimalChar","decimalChar","stringNumber","number","length","Number","replace","String","isInteger","isNaN","isFinite","decimalIndex","lastIndexOf","decimal","slice","parts","parse","push","join","string","separator","i","strings","substr","bindWith","AggregationFn","client","utils","Burning","type","collection","fields","field","fn","SUM","filter","id","in","burner","Stakes","code_hash","depoolV3CodeHash","depoolBroxusCodeHash","electorCodeHash","Givers","givers","Total","net","query","coldTons","result","aggregateAccounts","operations","batch_query","response","BurningAssets","Math","round","results","oneTon","StakesAssets","GiversAssets","TotalAssets","coldTonsAssets","UsersAssets","BurningAssetsPercents","StakesAssetsPercents","GiversAssetsPercents","UsersAssetsPercents","coldTonsPercents","assets","console","log"],"mappings":"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","file":"js/chunk-2ee6c1aa.ef67c6be.js","sourcesContent":["function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var render, staticRenderFns\nimport script from \"./StakesGiversUsers.vue?vue&type=script&lang=js&\"\nexport * from \"./StakesGiversUsers.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { Pie } from \"vue-chartjs\";\nimport { stakesGiversUsers } from \"../api/stakesGiversUsers\";\nexport default {\n  extends: Pie,\n  data() {\n    return {\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        title: {\n          display: true,\n          text: \"All assets\",\n          fontSize: 25,\n          fontStyle: \"normal\",\n        },\n      },\n    };\n  },\n  async mounted() {     \n    const data = await stakesGiversUsers();        \n      this.renderChart(\n      {\n        labels: data.labels,\n        datasets: [\n          {\n            label: \"All assets in EverScale: Stakes, Givers, Burned Free circulation\",\n            backgroundColor: [\"#e25822\",\"green\", \"blue\", \"pink\", \"black\"],\n            data: data.assets,\n          },\n        ],\n      },\n      this.options\n    );\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StakesGiversUsers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StakesGiversUsers.vue?vue&type=script&lang=js&\"","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","'use strict'\n\n// return a string with the provided number formatted with commas.\n// can specify either a Number or a String.\nfunction commaNumber(inputNumber, optionalSeparator, optionalDecimalChar) {\n\n  // default `decimalChar` is a period\n  const decimalChar = optionalDecimalChar || '.'\n\n  let stringNumber // we assign this in the switch block and need it later.\n\n  {\n    let number // we assign this in the switch block and need it right after.\n\n    switch (typeof inputNumber) {\n\n      case 'string':\n\n        // if there aren't enough digits to need separators then return it\n        // NOTE: some numbers which are too small will get passed this\n        //       when they have decimal values which make them too long here.\n        //       but, the number value check after this switch will catch it.\n        if (inputNumber.length < (inputNumber[0] === '-' ? 5 : 4)) {\n          return inputNumber\n        }\n\n        // remember it as a string in `stringNumber` and convert to a Number\n        stringNumber = inputNumber\n\n        // if they're not using the Node standard decimal char then replace it\n        // before converting.\n        number = Number(\n          (decimalChar !== '.') ? stringNumber.replace(decimalChar, '.') : stringNumber\n        )\n        break\n\n      // convert to a string.\n      // NOTE: don't check if the number is too small before converting\n      //       because we'll need to return `stringNumber` anyway.\n      case 'number':\n        stringNumber = String(inputNumber)\n        number       = inputNumber\n        // create the string version with the decimalChar they specified.\n        // this matches what the above case 'string' produces,\n        // and, fixes the bug *not* doing this caused.\n        if ('.' !== decimalChar && !Number.isInteger(inputNumber)) {\n          stringNumber = stringNumber.replace('.', decimalChar)\n        }\n        break\n\n      // return invalid type as-is\n      default: return inputNumber\n    }\n\n    // when it doesn't need a separator or isn't a number then return it\n    if ((-1000 < number && number < 1000) || isNaN(number) || !isFinite(number)) {\n      return stringNumber\n    }\n  }\n\n  {\n    // strip off decimal value to add back in later\n    const decimalIndex = stringNumber.lastIndexOf(decimalChar)\n    let decimal\n    if (decimalIndex > -1) {\n      decimal = stringNumber.slice(decimalIndex)\n      stringNumber = stringNumber.slice(0, decimalIndex)\n    }\n\n    // finally, parse the string. Note, default 'separator' is a comma.\n    const parts = parse(stringNumber, optionalSeparator || ',')\n\n    // if there's a decimal value then add it to the parts.\n    if (decimal) {// NOTE: we sliced() it off including the decimalChar\n      parts.push(decimal)\n    }\n\n    // combine all parts for the final string (note, has separators).\n    return parts.join('')\n  }\n}\n\nfunction parse(string, separator) {\n\n  // find first index to split the string at (where 1st separator goes).\n  let i = ((string.length - 1) % 3) + 1\n\n  // above calculation is wrong when num is negative and a certain size.\n  if (i === 1 && (string[0] === '-')) {\n    i = 4  // example: -123,456,789  start at 4, not 1.\n  }\n\n  const strings = [ // holds the string parts\n    string.slice(0, i) // grab part before the first separator\n  ]\n\n  // split remaining string in groups of 3 where a separator belongs\n  for (; i < string.length; i += 3) {\n    strings.push(separator, string.substr(i, 3))\n  }\n\n  return strings\n}\n\n\n// convenience function for currying style:\n//   const format = commaNumber.bindWith(',', '.')\nfunction bindWith(separator, decimalChar) {\n  return function(number) {\n    return commaNumber(number, separator, decimalChar)\n  }\n}\n\nmodule.exports = commaNumber\nmodule.exports.bindWith = bindWith\n","\nconst { AggregationFn, client } = require(\"./client/webClient\");\nconst commaNumber = require('comma-number');\nconst utils = require('./utils');\n\nconst stakesGiversUsers = async () => {\n    const Burning =\n    {\n        type: \"AggregateCollection\",\n        collection: \"accounts\",\n        fields: [\n            {\n                field: \"balance\",\n                fn: AggregationFn.SUM\n            }\n        ],\n        filter: {\n            id: {\n                in: [\n                    \"0:0000000000000000000000000000000000000000000000000000000000000000\",\n                    utils.burner\n                ]\n            }\n            // }\n            // code_hash: {\n            //     eq: \"d80dd077e56dd76af65b163b6da94cca9d2c8e62740d09d98f9a4459ac069958\",\n            // },\n        }\n    }\n        ;\n    const Stakes =\n    {\n        type: \"AggregateCollection\",\n        collection: \"accounts\",\n        fields: [\n            {\n                field: \"balance\",\n                fn: AggregationFn.SUM\n            }\n        ],\n        filter: {\n            code_hash: {\n                in: [\n                    utils.depoolV3CodeHash,\n                    utils.depoolBroxusCodeHash,\n                    utils.electorCodeHash\n                ]\n            }\n        }\n    };\n    const Givers =\n    {\n        type: \"AggregateCollection\",\n        collection: \"accounts\",\n        fields: [\n            {\n                field: \"balance\",\n                fn: AggregationFn.SUM\n            }\n        ],\n        filter: {\n            id: {\n                in: [\n                    ...utils.givers\n                ]\n            }\n        }\n    }\n\n    const Total = {\n        type: \"AggregateCollection\",\n        collection: \"accounts\",\n        fields: [\n            {\n                field: \"balance\",\n                fn: AggregationFn.SUM\n            }\n        ]\n    }\n\n    const coldTons = (await client.net.query({\n        \"query\": `        \n            {aggregateAccounts(\n            filter:{      \n              acc_type: {\n                ne: 1\n              }              \n            }\n            fields:[\n              {field: \"balance\", fn: SUM}\n            ]\n          )}\n        ` })).result.data.aggregateAccounts[0];\n\n    const operations = [Burning, Stakes, Givers, Total];\n\n    try {\n        const response = await client.net.batch_query({\n            operations\n        });\n\n        const BurningAssets = Math.round(response.results[0][0] / utils.oneTon);\n        const StakesAssets = Math.round(response.results[1][0] / utils.oneTon);\n        const GiversAssets = Math.round(response.results[2][0] / utils.oneTon);\n        const TotalAssets = Math.round(response.results[3][0] / utils.oneTon);\n        const coldTonsAssets = Math.round(coldTons / utils.oneTon);\n        const UsersAssets = TotalAssets - GiversAssets - StakesAssets - BurningAssets - coldTonsAssets;\n \n        const BurningAssetsPercents = Math.round(BurningAssets / TotalAssets * 100);\n        const StakesAssetsPercents = Math.round(StakesAssets / TotalAssets * 100);\n        const GiversAssetsPercents = Math.round(GiversAssets / TotalAssets * 100);\n        const UsersAssetsPercents = Math.round(UsersAssets / TotalAssets * 100);\n        const coldTonsPercents = Math.round(coldTonsAssets / TotalAssets * 100);\n\n        return {\n            assets: [\n                BurningAssets,\n                StakesAssets,\n                GiversAssets,\n                UsersAssets,\n                coldTonsAssets\n            ],\n            labels: [\n                `BURNED: ${commaNumber(BurningAssets)} EVERs(${BurningAssetsPercents})%`,\n                `STAKES: ${commaNumber(StakesAssets)} EVERs(${StakesAssetsPercents})%`,\n                `GIVERS: ${commaNumber(GiversAssets)} EVERs(${GiversAssetsPercents})%`,\n                `FREE CIRCULATION: ${commaNumber(UsersAssets)} EVERs(${UsersAssetsPercents})%`,\n                `COLD EVERS: ${commaNumber(coldTonsAssets)} EVERs(${coldTonsPercents})%`\n            ]\n        }\n    } catch (e) {\n        console.log(e);\n    }\n}\n\nmodule.exports = {\n    stakesGiversUsers\n}"],"sourceRoot":""}