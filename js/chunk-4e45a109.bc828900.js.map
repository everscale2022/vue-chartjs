{"version":3,"sources":["webpack:///./src/components/newSurfAccounts/Common.vue?2fdd","webpack:///./src/api/newSurfAccounts.js","webpack:///./src/components/newSurfAccounts/Common.vue?ea6f","webpack:///./src/components/newSurfAccounts/Chart.vue","webpack:///src/components/newSurfAccounts/Chart.vue","webpack:///./src/components/newSurfAccounts/Chart.vue?f6a8","webpack:///src/components/newSurfAccounts/Common.vue","webpack:///./src/components/newSurfAccounts/Common.vue?6e88","webpack:///./src/components/newSurfAccounts/Common.vue"],"names":["require","client","utils","makeQuery","interval","intervalCount","query","index","lt","now","surfCodeHash","newSurfAccounts","oneMonth","accounts","labels","net","response","result","data","Object","entries","key","value","push","timestamp","split","dt","Date","toLocaleDateString","datasets","label","backgroundColor","console","log","module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","chartData","directives","name","rawName","expression","_v","on","fmonth","fweek","fday","staticRenderFns","extends","mixins","reactiveProp","options","responsive","maintainAspectRatio","legend","component","loading_graphic","components","chart","methods"],"mappings":"kHAAA,W,mHCAA,MAAmBA,EAAQ,QAAnBC,EAAR,EAAQA,OACFC,EAAQF,EAAQ,QAGtB,SAASG,EAAUC,EAAUC,GAEzB,IADA,IAAIC,EAAQ,IACHC,EAAQF,EAAeE,GAAS,EAAGA,IAAS,CACjD,IAAIC,EAAKN,EAAMO,IAAMF,EAAQH,EAE7BE,GAAS,sBAAJ,OACME,EADN,mGAGsBA,EAHtB,mGAKcN,EAAMQ,aALpB,+HAaT,OADAJ,GAAS,IACFA,EAGX,IAAMK,EAAe,4CAAG,6IAAOP,EAAP,+BAAkBF,EAAMU,SAAUP,EAAlC,+BAAkD,GAClEQ,EAAW,GACXC,EAAS,GAFO,kBAKOb,EAAOc,IAAIT,MAAM,CAAE,MAASH,EAAUC,EAAUC,KALvD,OAMhB,IADIW,EALY,OAK0EC,OAAOC,KACjG,MAA2BC,OAAOC,QAAQJ,GAA1C,eAAqD,YAAzCK,EAAyC,KAApCC,EAAoC,KACjDT,EAASU,KAAKD,EAAM,IAChBE,EAAYH,EAAII,MAAM,KAAK,GAC3BC,EAAK,IAAIC,KAAiB,IAAZH,GAAkBI,mBAAmB,SACvDd,EAAOS,KAAKG,GAVA,yBAYT,CACHG,SAAU,CACN,CACIC,MAAO,gBACPC,gBAAiB,YACjBb,KAAML,IAGdC,WApBY,qCAuBhBkB,QAAQC,IAAR,MAvBgB,0DAAH,qDA2BrBC,EAAOC,QAAU,CACbxB,oB,yCCrDJ,ICAI,EAAQ,EDARyB,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAcC,MAAM,CAAC,GAAK,YAAY,CAACH,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACG,MAAM,CAAC,aAAaP,EAAIQ,aAAaJ,EAAG,MAAM,CAACK,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAS1B,MAAOe,EAAmB,gBAAEY,WAAW,oBAAoBN,YAAY,gBAAgB,CAACN,EAAIa,GAAG,uBAAuB,GAAGT,EAAG,MAAM,CAACA,EAAG,OAAO,CAACE,YAAY,eAAeQ,GAAG,CAAC,MAAQd,EAAIe,SAAS,CAACf,EAAIa,GAAG,sBAAsBT,EAAG,OAAO,CAACE,YAAY,eAAeQ,GAAG,CAAC,MAAQd,EAAIgB,QAAQ,CAAChB,EAAIa,GAAG,YAAYT,EAAG,OAAO,CAACE,YAAY,eAAeQ,GAAG,CAAC,MAAQd,EAAIiB,OAAO,CAACjB,EAAIa,GAAG,gBAC/nBK,EAAkB,G,oCECtB,sBAEA,GACEC,QAAS,EAAX,KACEC,OAAQ,CAACC,GACTxC,KAHF,WAII,MAAO,CACLyC,QAAS,CACPC,YAAY,EACZC,qBAAqB,EACrBC,OAAQ,CACNhD,OAAQ,CACN,SAAZ,QAME,QAhBF,WAgBA,wJACA,qCADA,+CCpB8V,I,YFO1ViD,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,yCGAf,GACE7C,KADF,WAEI,MAAO,CACL2B,UAAW,KACXmB,iBAAiB,IAGrBC,WAAY,CACVC,MAAJ,GAEE,QAVF,WAUA,WACI,OAAJ,qBAAI,GAAJ,kBACA,cACA,yBAGEC,QAAS,CACP,OADJ,WACA,wKACA,8CADA,OACA,YADA,qDAGA,MAJA,WAIA,wKACA,6CADA,OACA,YADA,qDAGA,KAPA,WAOA,wKACA,4CADA,OACA,YADA,uDCzC+V,ICQ3V,G,UAAY,eACd,EACA/B,EACAmB,GACA,EACA,KACA,WACA,OAIa,e","file":"js/chunk-4e45a109.bc828900.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Common.vue?vue&type=style&index=0&id=460b9cfa&scoped=true&lang=css&\"","const { client } = require(\"./client/webClient\");\nconst utils = require(\"./utils\");\n\n\nfunction makeQuery(interval, intervalCount) {\n    let query = '{';\n    for (let index = intervalCount; index >= 0; index--) {\n        let lt = utils.now - index * interval;\n       // let gt = lt - utils.oneMonth;\n        query += `\n            data_${lt}: aggregateAccounts(\n                filter: {      \n                last_paid: { lt: ${lt}}                               \n                code_hash:{\n                    eq: \"${utils.surfCodeHash}\"\n                }                \n                }\n                fields: [{ fn: COUNT }]\n            )\n          `;\n    }\n    query += '}';  \n    return query;\n}\n\nconst newSurfAccounts = async (interval = utils.oneMonth, intervalCount = 12) => {\n    let accounts = [];\n    let labels = [];\n\n    try {\n        let response =  (await client.net.query({ \"query\": makeQuery(interval, intervalCount) })).result.data;\n        for (const [key, value] of Object.entries(response)) {\n            accounts.push(value[0]);\n            let timestamp = key.split(\"_\")[1];\n            let dt = new Date(timestamp * 1000).toLocaleDateString(\"ru-RU\");\n            labels.push(dt);    \n        }     \n        return {\n            datasets: [\n                {\n                    label: \"Surf accounts\",\n                    backgroundColor: \"lightblue\",\n                    data: accounts,\n                },\n            ],\n            labels\n        };\n    } catch (e) {\n        console.log(e);\n    }\n}\n\nmodule.exports = {\n    newSurfAccounts\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-center\",attrs:{\"id\":\"buttons\"}},[_c('div',[_c('chart',{attrs:{\"chart-data\":_vm.chartData}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading_graphic),expression:\"loading_graphic\"}],staticClass:\"h3 text-info\"},[_vm._v(\"Data loading ...\")])],1),_c('div',[_c('span',{staticClass:\"btn btn-info\",on:{\"click\":_vm.fmonth}},[_vm._v(\" Month(default) \")]),_c('span',{staticClass:\"btn btn-info\",on:{\"click\":_vm.fweek}},[_vm._v(\" Week \")]),_c('span',{staticClass:\"btn btn-info\",on:{\"click\":_vm.fday}},[_vm._v(\" Day \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render, staticRenderFns\nimport script from \"./Chart.vue?vue&type=script&lang=js&\"\nexport * from \"./Chart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { Line, mixins } from \"vue-chartjs\";\nconst { reactiveProp } = mixins;\n\nexport default {\n  extends: Line,\n  mixins: [reactiveProp],\n  data() {\n    return {\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        legend: {           \n          labels: {                          \n              fontSize: 25,            \n          },\n        },\n      },\n    };\n  },\n  async mounted() {\n    this.renderChart(this.chartData, this.options);\n  },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chart.vue?vue&type=script&lang=js&\"","<template>\n  <div id=\"buttons\" class=\"text-center\"> \n    <div>\n      <chart :chart-data=\"chartData\" />\n      <div class=\"h3 text-info\" v-show=\"loading_graphic\">Data loading ...</div>\n    </div>\n    <div>\n      <span class=\"btn btn-info\" @click=\"fmonth\"> Month(default) </span>\n      <span class=\"btn btn-info\" @click=\"fweek\"> Week </span>\n      <span class=\"btn btn-info\" @click=\"fday\"> Day </span>\n    </div>        \n  </div>\n</template>\n<script>\nimport chart from \"./Chart.vue\";\nimport {newSurfAccounts} from \"../../api/newSurfAccounts\";\nimport utils from \"../../api/utils\";\n\nexport default    {\n  data() {\n    return {\n      chartData: null,\n      loading_graphic: true      \n    };\n  },\n  components: {\n    chart,\n  },\n   mounted() {\n    newSurfAccounts().then((r)=>{\n     this.chartData = r;\n     this.loading_graphic= false;\n    });        \n  },\n  methods: {\n    async fmonth() {\n     this.chartData = await newSurfAccounts(utils.oneMonth, 12);    \n    },\n   async fweek() {    \n       this.chartData = await newSurfAccounts(utils.oneWeek, 30);       \n   },\n   async fday() {       \n        this.chartData = await newSurfAccounts(utils.oneDay, 30);\n    },\n  }\n};\n</script>\n<style scoped>\n#buttons span {\n  margin-right: 1rem;\n  margin-left: 1rem;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Common.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Common.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Common.vue?vue&type=template&id=460b9cfa&scoped=true&\"\nimport script from \"./Common.vue?vue&type=script&lang=js&\"\nexport * from \"./Common.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Common.vue?vue&type=style&index=0&id=460b9cfa&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"460b9cfa\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}